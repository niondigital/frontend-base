@use "sass:math";
@use "sass:map";
@use "../vars" as *;
@use "round" as *;
@use "unit-helpers" as *;

// Based on https://www.smashingmagazine.com/2022/10/fluid-typography-clamp-sass-functions/
// Usage:
// font-size: fluid(16px, 31px);
// or
// font-size: fluid(16px, 31px, 375, 1200);

$default-min-bp: map.get($breakpoints, small);
$default-max-bp: map.get($breakpoints, large);

@if map.has-key($breakpoints, xlarge) {
  $default-max-bp: map.get($breakpoints, xlarge);
}

@function fluid(
  $min-size,
  $max-size,
  $min-breakpoint: $default-min-bp,
  $max-breakpoint: $default-max-bp,
  $unit: vw
) {
  $slope: math.div($max-size - $min-size, $max-breakpoint - $min-breakpoint);
  $slope-to-unit: round($slope * 100, 2);
  $intercept-rem: round(px-to-rem($min-size - $slope * $min-breakpoint), 2);
  $min-size-rem: round(px-to-rem($min-size), 2);
  $max-size-rem: round(px-to-rem($max-size), 2);
  @return clamp(
    #{$min-size-rem},
    #{$slope-to-unit}#{$unit} + #{$intercept-rem},
    #{$max-size-rem}
  );
}
